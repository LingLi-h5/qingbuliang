<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>海南清补凉美食地图</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="../css/main.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: url('../assets/images/主题.png') no-repeat center center fixed;
            background-size: cover;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            color: #5a3921;
            touch-action: manipulation;
        }

        .container {
            width: 100%;
            max-width: 100%;
            text-align: center;
        }

        .header {
            margin-bottom: 15px;
            padding: 12px;
            animation: fadeInDown 1s ease;
        }

        .header h1 {
            color: #8B4513;
            font-size: 1.6rem;
            margin-bottom: 8px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            font-weight: 600;
        }

        .header p {
            color: #654321;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .map-container {
            position: relative;
            width: 100%;
            height: 50vh;
            min-height: 300px;
            background: url("../assets/images/地图.png") no-repeat center center;
            background-size: cover;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .hainan-map {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .location {
            position: absolute;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8B4513, #A0522D);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 3px 8px rgba(139, 69, 19, 0.4);
            transition: all 0.3s ease;
            z-index: 10;
            animation: pulse 2s infinite;
            transform: translate(-50%, -50%);
        }

        .location:active {
            transform: translate(-50%, -50%) scale(1.2);
            box-shadow: 0 4px 12px rgba(139, 69, 19, 0.6);
        }

        .location i {
            color: white;
            font-size: 0.9rem;
        }

        .location-info {
            position: absolute;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            width: 280px;
            max-width: 85vw;
            z-index: 100;
            display: none;
            animation: fadeInUp 0.3s ease;
            border: 1px solid rgba(139, 69, 19, 0.2);
            left: 50%;
            transform: translateX(-50%);
            bottom: 10px;
        }

        .location-info.active {
            display: block;
        }

        .info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e0e0e0;
        }

        .shop-name {
            font-size: 1.1rem;
            color: #8B4513;
            font-weight: bold;
        }

        .rating {
            display: flex;
            align-items: center;
            background: #ffd700;
            padding: 3px 6px;
            border-radius: 15px;
            color: #8B4513;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .rating i {
            margin-right: 3px;
            font-size: 0.7rem;
        }

        .info-details {
            text-align: left;
        }

        .detail-item {
            margin-bottom: 8px;
            display: flex;
            align-items: flex-start;
            font-size: 0.85rem;
            line-height: 1.3;
        }

        .detail-item i {
            color: #8B4513;
            margin-right: 8px;
            margin-top: 1px;
            width: 14px;
            font-size: 0.8rem;
        }

        .detail-label {
            font-weight: bold;
            color: #654321;
            margin-right: 4px;
            flex-shrink: 0;
        }

        .specialty {
            background: rgba(255, 236, 210, 0.5);
            padding: 6px 10px;
            border-radius: 6px;
            margin-top: 4px;
            font-size: 0.8rem;
        }

        /* 关键修改：探索指南样式匹配参考代码的白色框框 */
        .instructions {
            /* 改为实色白色背景，移除半透明效果 */
            background-color: #ffffff;
            /* 匹配参考代码的圆角 */
            border-radius: 25px;
            /* 匹配参考代码的内边距 */
            padding: 25px 20px;
            width: 90%;
            max-width: 800px;
            margin: 15px auto;
            text-align: left;
            /* 匹配参考代码的阴影效果 */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
            /* 匹配参考代码的边框 */
            border: 1px solid #e0e0e0;
            /* 移除 backdrop-filter（参考代码无此效果） */
            position: relative;
            z-index: 2;
        }

        .instructions h2 {
            color: #d35400; /* 标题颜色匹配参考代码的主色调 */
            margin-bottom: 20px; /* 增加底部间距，匹配参考代码 */
            text-align: center;
            font-size: 1.5rem; /* 增大标题字体，匹配参考代码 */
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1); /* 增加文字阴影，匹配参考代码 */
            position: relative;
        }

        /* 给标题添加下划线，匹配参考代码的标题样式 */
        .instructions h2::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #e74c3c, #f39c12, #2ecc71);
            border-radius: 2px;
        }

        .instructions ul {
            padding-left: 25px; /* 调整列表缩进，优化显示 */
        }

        .instructions li {
            margin-bottom: 12px; /* 增加列表项间距 */
            line-height: 1.6; /* 优化行高，提升可读性 */
            font-size: 1rem; /* 增大列表字体，匹配参考代码风格 */
            color: #5a3921; /* 确保文字颜色协调 */
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(15px) translateX(-50%);
            }
            to {
                opacity: 1;
                transform: translateY(0) translateX(-50%);
            }
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(139, 69, 19, 0.7);
            }
            70% {
                box-shadow: 0 0 0 8px rgba(139, 69, 19, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(139, 69, 19, 0);
            }
        }

        /* 浮动操作按钮样式 - 保留核心样式，移除页面指示器相关 */
        .fab-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
        }

        .fab-main {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8B4513, #D2691E);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 25px rgba(139, 69, 19, 0.5);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border: none;
            font-size: 26px;
            position: relative;
            z-index: 101;
        }

        .fab-main:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 8px 30px rgba(139, 69, 19, 0.7);
        }

        .fab-menu {
            position: absolute;
            bottom: 75px;
            right: 0;
            display: flex;
            flex-direction: column;
            gap: 18px;
            opacity: 0;
            transform: translateY(25px) scale(0.9);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            pointer-events: none;
        }

        .fab-menu.open {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: all;
        }

        .fab-item {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: white;
            color: #8B4513;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 18px rgba(0, 0, 0, 0.25);
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 16px;
            font-weight: 600;
            position: relative;
            text-align: center;
            padding: 5px;
        }

        .fab-item:hover {
            transform: scale(1.15);
            background: #f5e3d4;
            box-shadow: 0 6px 22px rgba(0, 0, 0, 0.3);
        }

        .fab-label {
            position: absolute;
            right: 80px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 13px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            font-weight: 500;
        }

        .fab-item:hover .fab-label {
            opacity: 1;
        }

        /* 响应式设计 - 移除页面指示器相关，保留核心响应式 */
        @media (max-width: 768px) {
            .fab-container {
                bottom: 25px;
                right: 25px;
            }
            
            .fab-main {
                width: 58px;
                height: 58px;
                font-size: 24px;
            }
            
            .fab-item {
                width: 60px;
                height: 60px;
                font-size: 14px;
            }

            /* 响应式调整探索指南 */
            .instructions {
                max-width: 90%;
                padding: 20px 15px;
            }

            .instructions h2 {
                font-size: 1.3rem;
            }

            .instructions li {
                font-size: 0.9rem;
                margin-bottom: 10px;
            }
        }

        @media (max-width: 480px) {
            .fab-container {
                bottom: 20px;
                right: 20px;
            }
            
            .fab-main {
                width: 52px;
                height: 52px;
                font-size: 22px;
            }
            
            .fab-item {
                width: 55px;
                height: 55px;
                font-size: 13px;
            }

            /* 响应式调整探索指南 */
            .instructions {
                padding: 20px 15px;
            }

            .instructions h2 {
                font-size: 1.2rem;
            }

            .instructions li {
                font-size: 0.85rem;
            }
        }

        /* 超小屏幕优化 */
        @media (max-width: 320px) {
            .header h1 {
                font-size: 1.4rem;
            }
            
            .header p {
                font-size: 0.8rem;
            }
            
            .map-container {
                height: 45vh;
                min-height: 250px;
            }
            
            .location {
                width: 28px;
                height: 28px;
            }
            
            .location i {
                font-size: 0.8rem;
            }
            
            .location-info {
                width: 260px;
                padding: 12px;
            }
            
            .shop-name {
                font-size: 1rem;
            }

            /* 超小屏幕调整探索指南 */
            .instructions {
                padding: 18px 12px;
            }

            .instructions h2 {
                font-size: 1.1rem;
            }

            .instructions li {
                font-size: 0.8rem;
                margin-bottom: 8px;
            }
        }

        /* 横屏优化 */
        @media (max-height: 500px) and (orientation: landscape) {
            .map-container {
                height: 65vh;
            }
            
            .instructions {
                padding: 15px;
                margin: 10px auto;
            }
            
            .instructions li {
                margin-bottom: 8px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>海南清补凉美食地图</h1>
            <p>探索海南岛最地道的清补凉美味，点击地图标记发现美食店铺</p>
        </div>
        
        <div class="map-container">
            <div class="hainan-map" id="hainanMap">
                <!-- 地图标记将通过JavaScript动态添加 -->
            </div>
        </div>
        
        <div class="instructions">
            <h2>探索指南</h2>
            <ul>
                <li><strong>点击地图标记</strong> - 查看店铺详细信息，包括招牌推荐和用户评分</li>
                <li><strong>寻找最佳店铺</strong> - 金色标记表示评分4.7以上的高口碑店铺</li>
                <li><strong>探索全岛美味</strong> - 从海口到三亚，发现各地特色清补凉</li>
            </ul>
        </div>
    </div>

    <!-- 浮动操作按钮 - 保留核心功能 -->
    <div class="fab-container">
        <button class="fab-main" id="fabMain">
            <i class="fas fa-exchange-alt"></i>
        </button>
        <div class="fab-menu" id="fabMenu">
            <a href="page0.html" class="fab-item">
                菜单
                <span class="fab-label">返回菜单</span>
            </a>
            <a href="page9.html" class="fab-item">
                下页
                <span class="fab-label">下一页</span>
            </a>
        </div>
    </div>

    <script>
        // 清补凉店铺数据
        const shops = [
            {
                id: 1,
                name: "老彭记清补凉",
                position: { x: 45, y: 65 },
                rating: 4.8,
                price: "15-25元",
                address: "海口市美兰区海府路12号",
                specialty: ["椰子水清补凉", "椰奶清补凉", "冰淇淋清补凉"],
                description: "海口老字号，传承三代人的手艺，椰子水清甜爽口。"
            },
            {
                id: 2,
                name: "旺溪清补凉",
                position: { x: 60, y: 40 },
                rating: 4.7,
                price: "12-20元",
                address: "文昌市文城镇东风路88号",
                specialty: ["芋圆清补凉", "红豆沙清补凉", "传统椰奶清补凉"],
                description: "文昌人气店铺，芋圆Q弹有嚼劲，深受当地人喜爱。"
            },
            {
                id: 3,
                name: "甜蜜蜜清补凉",
                position: { x: 30, y: 50 },
                rating: 4.5,
                price: "10-18元",
                address: "琼海市嘉积镇人民路56号",
                specialty: ["芒果清补凉", "百香果清补凉", "招牌椰奶清补凉"],
                description: "创新口味清补凉，水果系列特别受年轻人欢迎。"
            },
            {
                id: 4,
                name: "老街清补凉",
                position: { x: 40, y: 30 },
                rating: 4.6,
                price: "8-15元",
                address: "万宁市万城镇解放路102号",
                specialty: ["传统红糖清补凉", "绿豆清补凉", "桂圆红枣清补凉"],
                description: "坚持传统制作工艺，红糖清补凉甜而不腻。"
            },
            {
                id: 5,
                name: "海风清补凉",
                position: { x: 20, y: 70 },
                rating: 4.9,
                price: "18-30元",
                address: "三亚市吉阳区滨海路205号",
                specialty: ["豪华海鲜清补凉", "椰皇清补凉", "冰沙清补凉"],
                description: "高端清补凉体验，用料讲究，环境优雅。"
            },
            {
                id: 6,
                name: "阿婆清补凉",
                position: { x: 55, y: 55 },
                rating: 4.4,
                price: "6-12元",
                address: "儋州市那大镇文化路34号",
                specialty: ["传统清补凉", "冬瓜薏清补凉", "莲子清补凉"],
                description: "三十年老店，价格亲民，味道纯正。"
            }
        ];

        // 初始化地图
        document.addEventListener('DOMContentLoaded', function() {
            const mapContainer = document.getElementById('hainanMap');
            
            // 创建店铺标记
            shops.forEach(shop => {
                createShopMarker(shop, mapContainer);
            });

            // 点击页面其他区域关闭信息窗口
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.location') && !e.target.closest('.location-info')) {
                    document.querySelectorAll('.location-info').forEach(info => {
                        info.classList.remove('active');
                    });
                }
            });

            // 浮动操作按钮功能 - 保留核心功能
            const fabMain = document.getElementById('fabMain');
            const fabMenu = document.getElementById('fabMenu');
            
            fabMain.addEventListener('click', function() {
                fabMenu.classList.toggle('open');
            });

            // 点击页面其他地方关闭FAB菜单
            document.addEventListener('click', function(e) {
                if (!fabMain.contains(e.target) && !fabMenu.contains(e.target)) {
                    fabMenu.classList.remove('open');
                }
            });
        });

        // 创建店铺标记函数
        function createShopMarker(shop, container) {
            const marker = document.createElement('div');
            marker.className = 'location';
            marker.style.left = `${shop.position.x}%`;
            marker.style.top = `${shop.position.y}%`;
            
            // 高评分店铺使用不同图标
            if (shop.rating >= 4.7) {
                marker.innerHTML = '<i class="fas fa-crown"></i>';
                marker.style.background = 'linear-gradient(135deg, #FFD700, #FFA500)';
            } else {
                marker.innerHTML = '<i class="fas fa-utensils"></i>';
            }
            
            // 创建信息窗口
            const infoWindow = document.createElement('div');
            infoWindow.className = 'location-info';
            infoWindow.innerHTML = `
                <div class="info-header">
                    <div class="shop-name">${shop.name}</div>
                    <div class="rating">
                        <i class="fas fa-star"></i> ${shop.rating}
                    </div>
                </div>
                <div class="info-details">
                    <div class="detail-item">
                        <i class="fas fa-tag"></i>
                        <span class="detail-label">人均:</span> ${shop.price}
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span class="detail-label">地址:</span> ${shop.address}
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-utensil-spoon"></i>
                        <span class="detail-label">招牌推荐:</span>
                    </div>
                    <div class="specialty">
                        ${shop.specialty.map(item => `<div>• ${item}</div>`).join('')}
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-info-circle"></i>
                        <span>${shop.description}</span>
                    </div>
                </div>
            `;
            
            // 点击标记显示信息窗口
            marker.addEventListener('click', function(e) {
                e.stopPropagation();
                
                // 隐藏所有信息窗口
                document.querySelectorAll('.location-info').forEach(info => {
                    info.classList.remove('active');
                });
                
                // 显示当前信息窗口
                infoWindow.classList.add('active');
            });
            
            container.appendChild(marker);
            container.appendChild(infoWindow);
        }
    </script>
</body>
</html>